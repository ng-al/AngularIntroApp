<div class="routing-dynamic" ng-controller="dynamicCtrl as vm">
    <article ng-non-bindable>
        <h3>Dynamic Path Changes</h3>
        <p>
            ngRoute provides the <strong>$location</strong> service which you can use in your code to change URIs dynamically.
        </p>
        <p>
            In this application there is a controller (<strong>/app/routing/routingCtrl.js</strong>) that rewrites the path
            whenever the URI changes; this is to ensure that the address bar, the <strong>leftNav</strong> and <strong>tabs</strong>
            remain coordinated.
        </p>
        <p>
            Using <strong>$location</strong> to get or set the path is simple:
        </p>
        <p>
            Get the path: <code>var thePath = $location.path():</code>
        </p>
        <p>
            Set the path: <code>$location.path("/my/new/path");</code>
        </p>
        <p>
            Note that the parameter passed to <strong>path()</strong> does <strong>not</strong> use the hashbang syntax, even if that is the active mode.
        </p>
    </article>

    <hr>
    <h4>Try It</h4>
    <form name="dynamicForm" novalidate ng-submit="vm.submit(dynamicForm.$valid, vm.newPath)">
        <p>
            Type one of the URIs from the configuration into the textbox (ex: "/list/Demo").
        </p>
        <p>
            Note that if you type a URI that does not match anything in the configuration,
            the default routing rule will be used:
        </p>
        <p>
            <code>.otherwise({redirectTo: "/welcome"});</code>
        </p>

        <label for="newPath">New URI</label>
        <input id="newPath" type="text" name="newPath" ng-model="vm.newPath" required proper-uri>
        <button button-style="flat" type="submit">GO</button>

        <div ng-messages="dynamicForm.newPath.$error" ng-if="dynamicForm.$submitted">
            <div ng-message="required">A path cannot be empty.</div>
            <div ng-message="uri">The path must begin with a '/' and not contain a '#'</div>
        </div>
    </form>
    <hr>

    <h4>Notes:</h4>
    <ul>
        <li>All of the routing-related templates and controllers for this app can be found in <strong>/app/routing</strong>.</li>
        <li>The asterisk to the left of the text box is generated by a custom directive: (<strong>/lib/apSplatter/apSplatter.js</strong>) </li>
        <li>This form uses a custom validator to test the URI: (<strong>/topics/routing/dynamic/properUriValidator.js</strong>)</li>
    </ul>
</div>